-- This script was generated by the ERD tool in pgAdmin 4.
-- Please log an issue at https://redmine.postgresql.org/projects/pgadmin4/issues/new if you find any bugs, including reproduction steps.
BEGIN;


CREATE TABLE IF NOT EXISTS public.admins
(

    CONSTRAINT admins_pkey PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public.menu_elements
(

    CONSTRAINT menu_elements_pkey PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public.reservations
(

    CONSTRAINT reservations_pkey PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public.restaurant_credentials
(

    CONSTRAINT restaurant_credentials_pkey PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public.restaurants
(

    CONSTRAINT restaurants_pkey PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public.reviews
(

    CONSTRAINT reviews_pkey PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public.users
(

    CONSTRAINT users_pkey PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public.waiters
(

    CONSTRAINT waiters_pkey PRIMARY KEY (id)
);

ALTER TABLE IF EXISTS public.menu_elements
    ADD CONSTRAINT menu_elements_restaurant_id_fkey FOREIGN KEY (restaurant_id)
    REFERENCES public.restaurants (id) MATCH SIMPLE
    ON UPDATE CASCADE
    ON DELETE CASCADE;


ALTER TABLE IF EXISTS public.reservations
    ADD CONSTRAINT reservations_restaurant_id_fkey FOREIGN KEY (restaurant_id)
    REFERENCES public.restaurants (id) MATCH SIMPLE
    ON UPDATE CASCADE
    ON DELETE CASCADE;


ALTER TABLE IF EXISTS public.reservations
    ADD CONSTRAINT reservations_user_id_fkey FOREIGN KEY (user_id)
    REFERENCES public.users (id) MATCH SIMPLE
    ON UPDATE CASCADE
    ON DELETE CASCADE;


ALTER TABLE IF EXISTS public.reservations
    ADD CONSTRAINT reservations_waiter_id_fkey FOREIGN KEY (waiter_id)
    REFERENCES public.waiters (id) MATCH SIMPLE
    ON UPDATE CASCADE
    ON DELETE CASCADE;


ALTER TABLE IF EXISTS public.restaurant_credentials
    ADD CONSTRAINT restaurant_credentials_restaurant_id_fkey FOREIGN KEY (restaurant_id)
    REFERENCES public.restaurants (id) MATCH SIMPLE
    ON UPDATE CASCADE
    ON DELETE CASCADE;


ALTER TABLE IF EXISTS public.reviews
    ADD CONSTRAINT reviews_reservation_id_fkey FOREIGN KEY (reservation_id)
    REFERENCES public.reservations (id) MATCH SIMPLE
    ON UPDATE CASCADE
    ON DELETE RESTRICT;


ALTER TABLE IF EXISTS public.waiters
    ADD CONSTRAINT waiters_restaurant_id_fkey FOREIGN KEY (restaurant_id)
    REFERENCES public.restaurants (id) MATCH SIMPLE
    ON UPDATE CASCADE
    ON DELETE CASCADE;

END;